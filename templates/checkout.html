{% extends "base.html" %}
{% block title %}Checkout (COD) — Sharp Jordan{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold tracking-tight mb-6">Checkout (Cash on Delivery)</h1>

{% if not items %}
  <div class="rounded-2xl border border-gray-200 bg-white p-10 text-center text-gray-600">
    Your cart is empty. <a href="{% url 'product_list' %}" class="underline">Shop products</a>.
  </div>
{% else %}
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Form -->
    <form method="post" class="lg:col-span-2 rounded-2xl border border-gray-200 bg-white p-6">
      {% csrf_token %}
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <label class="text-sm text-gray-700">Full Name
          <input name="full_name" required class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none">
        </label>
        <label class="text-sm text-gray-700">Phone
          <input name="phone" required class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none">
        </label>
      </div>
      <label class="block mt-4 text-sm text-gray-700">Email (optional)
        <input type="email" name="email" class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none">
      </label>
      <label class="block mt-4 text-sm text-gray-700">Address
        <textarea name="address" required rows="4" class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none"></textarea>
      </label>
      <label class="block mt-4 text-sm text-gray-700">Notes (optional)
        <textarea name="notes" rows="3" class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none"></textarea>
      </label>

      <button class="mt-6 inline-flex items-center gap-2 rounded-lg bg-gray-900 px-5 py-3 text-white hover:bg-gray-800 transition">
        <i class="fa-solid fa-money-bill-wave"></i><span>Place COD Order</span>
      </button>
    </form>

    <!-- Summary -->
    <aside class="rounded-2xl border border-gray-200 bg-white p-6 h-fit">
      <h2 class="text-lg font-semibold mb-4">Order Summary</h2>
      <ul class="divide-y divide-gray-200">
        {% for row in items %}
          <li class="py-3 flex items-center justify-between">
            <span class="text-gray-700">{{ row.product.name }} × {{ row.qty }}</span>
            <span class="font-semibold text-gray-900">₱{{ row.line_total }}</span>
          </li>
        {% endfor %}
      </ul>
      <div class="mt-4 flex items-center justify-between text-gray-700">
        <span>Subtotal</span><span class="font-semibold">₱{{ subtotal }}</span>
      </div>
      <p class="mt-2 text-xs text-gray-500">Shipping & COD due on delivery.</p>
    </aside>
  </div>
{% endif %}
{% endblock %}
